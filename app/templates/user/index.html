{% extends "layout.html" %}
{% block title %}Usuarios{% endblock %}
{% block head %}
{{ super() }}
{% endblock %}
{% block content %}
<div class="container text-center">
  <div class="container mb-2">
    <h1>usuarios</h1>
    <p>Filtrar por nombre y/o activo/desactivado:</p>
    <form action="{{ url_for('user_search') }}" method="post">
      <input type="search" placeholder="Nombre" name="first_name">
      <select class="form-select-sm" name='activo'>
        <option value='1'>Activado</option>
        <option value='0'>Desactivado</option>
      </select>
      <button class="btn btn-outline-primary btn-sm" type="submit">Filtrar</button>
    </form>
  </div>
  <div class="table-responsive">

    <table class="table table-striped table-border table-sm table-hover">
      <tr class="table-light">
        </trclass>
        <th>Email</th>
        <th>Username</th>
        <th>Nombre</th>
        <th>apellido</th>
        <th>Estado</th>
      </tr>
      {% for user in users %}
      {% if not session["user"]== user.email %}
      <tr class="table-info">
        <td class="table-info">
          <a href="{{ url_for('user_edit_info', id=user.id) }}" class="usuario-listado">
            {{ user.email }}
          </a>
        </td>
        <td class="table-info">
          <a href="{{ url_for('user_edit_info', id=user.id) }}" class="usuario-listado">
            {{user.username}}
          </a>
        </td>
        <td class="table-info">
          <a href="{{ url_for('user_edit_info', id=user.id) }}" class="usuario-listado">
            {{ user.first_name }}
          </a>
        </td>
        <td class="table-info">
          <a href="{{ url_for('user_edit_info', id=user.id) }}" class="usuario-listado">
            {{ user.last_name }}
          </a>
        </td>
        <td class="table-info">
          <form action="{{ url_for('user_edit_estado', username=user.username) }}" method="POST">
            {% if user.activo %}
            <select name='activo'>
              <option value='1'>Activado</option>
              <option value='0'>Desactivado</option>
            </select>
            {% else %}
            <select name='activo'>
              <option value='0'>Desactivado</option>
              <option value='1'>Activado</option>
            </select>
            {% endif %}
            <input type="submit" value="actualizar">
          </form>
        </td>
      </tr>
      {% endif %}
      {% endfor %}
    </table>
  </div>
  <a href="{{ url_for('home') }}" class="btn btn-primary mb-2">Volver</a>
  <a href="{{ url_for('user_new') }}" class="btn btn-primary mb-2">Nuevo</a>
</div>
{% endblock %}